<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√© H·ªçc Ti·∫øng Vi·ªát L·ªõp 1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;700&family=Quicksand:wght@400;700&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            overflow-x: hidden;
        }

        .game-card {
            background: white;
            border-radius: 2rem;
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
            width: 95%;
            max-width: 600px;
            padding: 2rem;
            text-align: center;
            position: relative;
        }

        .btn-answer {
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 3px solid #e2e8f0;
        }

        .btn-answer:hover:not(:disabled) {
            transform: scale(1.03);
            border-color: #3b82f6;
            background-color: #eff6ff;
        }

        .correct {
            background-color: #10b981 !important;
            color: white !important;
            border-color: #059669 !important;
        }

        .wrong {
            background-color: #ef4444 !important;
            color: white !important;
            border-color: #dc2626 !important;
        }

        .progress-bar {
            height: 12px;
            background-color: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            transition: width 0.3s ease;
        }

        .level-badge {
            background: #f59e0b;
            color: white;
            padding: 0.25rem 1rem;
            border-radius: 1rem;
            font-weight: bold;
            font-size: 0.875rem;
        }

        /* Animations */
        @keyframes pop {
            0% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }
        .animate-pop { animation: pop 0.3s ease-out; }
    </style>
</head>
<body>

    <div id="game-container" class="game-card animate-pop">
        <!-- M√†n h√¨nh b·∫Øt ƒë·∫ßu -->
        <div id="start-screen">
            <h1 class="text-4xl font-bold text-blue-600 mb-4">Vui H·ªçc Ti·∫øng Vi·ªát</h1>
            <div class="mb-8">
                <svg viewBox="0 0 200 200" class="w-48 h-48 mx-auto">
                    <circle cx="100" cy="100" r="80" fill="#EBF4FF" />
                    <text x="50%" y="55%" font-family="Arial" font-size="60" text-anchor="middle" fill="#3B82F6">A ƒÇ √Ç</text>
                </svg>
            </div>
            <p class="text-gray-600 mb-8">Ch√†o m·ª´ng b√© ƒë·∫øn v·ªõi tr√≤ ch∆°i tr·∫Øc nghi·ªám Ti·∫øng Vi·ªát l·ªõp 1! H√£y c√πng v∆∞·ª£t qua 5 v√≤ng thi nh√©.</p>
            <button onclick="startGame()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-10 rounded-full text-xl shadow-lg transition-transform transform hover:scale-105">
                B·∫Øt ƒê·∫ßu Ch∆°i
            </button>
        </div>

        <!-- M√†n h√¨nh ch∆°i game -->
        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-4">
                <span class="level-badge" id="level-display">V√≤ng 1</span>
                <span class="font-bold text-gray-700">ƒêi·ªÉm: <span id="score-display" class="text-blue-600">0</span></span>
            </div>
            
            <div class="progress-bar mb-6">
                <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
            </div>

            <div id="question-image" class="mb-6 h-40 flex items-center justify-center bg-gray-50 rounded-xl">
                <!-- Image/SVG will be inserted here -->
            </div>

            <h2 id="question-text" class="text-2xl font-bold text-gray-800 mb-8">ƒêang t·∫£i c√¢u h·ªèi...</h2>

            <div id="answers-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Answer buttons will be inserted here -->
            </div>

            <div class="mt-8 flex justify-center gap-4">
                <button onclick="endGame()" class="text-red-500 hover:text-red-700 font-medium underline">K·∫øt th√∫c s·ªõm</button>
            </div>
        </div>

        <!-- M√†n h√¨nh k·∫øt qu·∫£ -->
        <div id="result-screen" class="hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">K·∫øt Qu·∫£ Cu·ªëi C√πng</h2>
            <div class="text-6xl font-bold text-blue-600 mb-4" id="final-score">0</div>
            <p id="result-message" class="text-xl text-gray-600 mb-8">B√© ƒë√£ ho√†n th√†nh xu·∫•t s·∫Øc!</p>
            <button onclick="location.reload()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-full shadow-lg">
                Ch∆°i L·∫°i
            </button>
        </div>
    </div>

    <!-- √Çm thanh gi·∫£ l·∫≠p qua Web Audio API -->
    <script>
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playTone(freq, type, duration) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        function playCorrectSound() {
            playTone(523.25, 'sine', 0.2); // C5
            setTimeout(() => playTone(659.25, 'sine', 0.3), 100); // E5
        }

        function playWrongSound() {
            playTone(220, 'triangle', 0.3); // A3
            setTimeout(() => playTone(196, 'triangle', 0.3), 150); // G3
        }

        // D·ªØ li·ªáu c√¢u h·ªèi theo t·ª´ng v√≤ng (Level 1-5)
        const allQuestions = [
            // Level 1: Ch·ªØ c√°i ƒë∆°n gi·∫£n
            [
                { q: "H√¨nh n√†o l√† qu·∫£ 'Cam'?", img: "üçä", options: ["T√°o", "Cam", "L√™", "M·∫≠n"], correct: 1 },
                { q: "Ch·ªØ c√°i n√†o c√≤n thi·∫øu: 'C_ c√°'?", img: "üêü", options: ["u", "a", "o", "√¥"], correct: 1 },
                { q: "H√¨nh n√†y l√† con g√¨?", img: "üê£", options: ["V·ªãt", "G√†", "Chim", "C√°"], correct: 1 },
                { q: "Ch·ªØ 'B' ƒë·ª©ng ƒë·∫ßu t·ª´ n√†o?", img: "‚öΩ", options: ["C√°", "B√≥ng", "D∆∞a", "G√†"], correct: 1 },
                { q: "V·∫ßn 'a' c√≥ trong t·ª´ n√†o?", img: "üè†", options: ["Nh√†", "H·ªçc", "Ng·ªß", "ƒêi"], correct: 0 },
                { q: "B√© ch·ªçn ch·ªØ 'o'?", img: "‚≠ï", options: ["a", "e", "o", "u"], correct: 2 },
                { q: "ƒê√¢y l√† qu·∫£ g√¨?", img: "üçå", options: ["Kh·∫ø", "·ªîi", "Chu·ªëi", "Cam"], correct: 2 },
                { q: "Con g√¨ k√™u 'Meo meo'?", img: "üê±", options: ["Ch√≥", "M√®o", "L·ª£n", "G√†"], correct: 1 },
                { q: "Ch·ªØ c√°i ƒë·∫ßu c·ªßa t·ª´ 'Xe'?", img: "üö≤", options: ["X", "S", "C", "K"], correct: 0 },
                { q: "B√© t√¨m ch·ªØ 'ƒÉ'?", img: "üåô", options: ["a", "√¢", "ƒÉ", "o"], correct: 2 }
            ],
            // Level 2: Gh√©p √¢m c∆° b·∫£n
            [
                { q: "T·ª´ n√†o c√≥ v·∫ßn 'an'?", img: " b√†n", options: ["B√†n", "B√∫t", "C·∫∑p", "S√°ch"], correct: 0 },
                { q: "ƒêi·ªÅn v√†o ch·ªó tr·ªëng: 'H_ h·ªçc'?", img: "‚úçÔ∏è", options: ["i", "√™", "∆°", "√¥"], correct: 1 },
                { q: "T·ª´ 'C√°' th√™m d·∫•u s·∫Øc th√†nh g√¨?", img: "üêü", options: ["C√†", "C·∫£", "C√°", "C·∫°"], correct: 2 },
                { q: "H√¨nh n√†o l√† 'C√°i ca'?", img: "ü•õ", options: ["B√°t", "Ca", "ƒê≈©a", "Th√¨a"], correct: 1 },
                { q: "Ch·ªçn t·ª´ ƒë√∫ng: 'Qu_ t√°o'?", img: "üçé", options: ["a", "·∫£", "·∫£", "√£"], correct: 1 },
                { q: "V·∫ßn 'oi' c√≥ trong t·ª´ n√†o?", img: "üêò", options: ["Voi", "G√†", "V·ªãt", "Ch√≥"], correct: 0 },
                { q: "T·ª´ n√†o c√≥ ch·ªØ 'd'?", img: "üçà", options: ["D∆∞a", "G√†", "C√°", "L√™"], correct: 0 },
                { q: "Ch·ªçn ch·ªØ c√°i ph√π h·ª£p: '_·ªè c·ªè'?", img: "üå±", options: ["B", "C", "G", "H"], correct: 1 },
                { q: "T·ª´ 'M·∫π' c√≥ thanh g√¨?", img: "üë©", options: ["Huy·ªÅn", "S·∫Øc", "N·∫∑ng", "H·ªèi"], correct: 2 },
                { q: "Gh√©p 'b' v·ªõi '∆°' v√† thanh huy·ªÅn?", img: "üßà", options: ["B∆°", "B·ªù", "B·ªü", "B·ªõ"], correct: 1 }
            ],
            // Level 3-5 (R√∫t g·ªçn v√≠ d·ª• cho m√£ ngu·ªìn)
            // ... (T∆∞∆°ng t·ª± tƒÉng ƒë·ªô kh√≥ d·∫ßn v·ªõi v·∫ßn ph·ª©c t·∫°p)
        ];

        // T·∫°o d·ªØ li·ªáu gi·∫£ cho Level 3,4,5 ƒë·ªÉ ƒë·ªß c·∫•u tr√∫c
        for(let i=2; i<5; i++) {
            allQuestions[i] = JSON.parse(JSON.stringify(allQuestions[0]));
            allQuestions[i].forEach(q => q.q = `[V√≤ng ${i+1}] ` + q.q);
        }

        let currentLevel = 0;
        let currentQuestionIndex = 0;
        let score = 0;
        let canAnswer = true;

        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            score = 0;
            currentLevel = 0;
            currentQuestionIndex = 0;
            updateScore();
            loadQuestion();
        }

        function loadQuestion() {
            canAnswer = true;
            const levelData = allQuestions[currentLevel];
            const q = levelData[currentQuestionIndex];
            
            document.getElementById('level-display').innerText = `V√≤ng ${currentLevel + 1}`;
            document.getElementById('progress-fill').style.width = `${(currentQuestionIndex / 10) * 100}%`;
            document.getElementById('question-text').innerText = q.q;
            
            // Render "Image" (Emoji for simplicity, can be SVG)
            document.getElementById('question-image').innerHTML = `<span style="font-size: 80px">${q.img}</span>`;
            
            const grid = document.getElementById('answers-grid');
            grid.innerHTML = '';
            
            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'btn-answer bg-white p-4 rounded-xl text-lg font-bold text-gray-700 shadow-sm';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(index, btn);
                grid.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, btn) {
            if (!canAnswer) return;
            canAnswer = false;

            const q = allQuestions[currentLevel][currentQuestionIndex];
            const buttons = document.querySelectorAll('.btn-answer');

            if (selectedIndex === q.correct) {
                score += 1;
                btn.classList.add('correct');
                playCorrectSound();
            } else {
                score = Math.max(0, score - 1); // Tr·ª´ ƒëi·ªÉm nh∆∞ng kh√¥ng d∆∞·ªõi 0
                btn.classList.add('wrong');
                buttons[q.correct].classList.add('correct');
                playWrongSound();
            }

            updateScore();

            setTimeout(() => {
                nextQuestion();
            }, 1500);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex >= 10) {
                currentLevel++;
                currentQuestionIndex = 0;
                
                if (currentLevel >= 5) {
                    endGame();
                    return;
                }
            }
            loadQuestion();
        }

        function updateScore() {
            document.getElementById('score-display').innerText = score;
        }

        function endGame() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
            
            let msg = "";
            if (score >= 40) msg = "Tuy·ªát v·ªùi! B√© l√† thi√™n t√†i Ti·∫øng Vi·ªát!";
            else if (score >= 25) msg = "L√†m t·ªët l·∫Øm! B√© c·ªë g·∫Øng th√™m ch√∫t n·ªØa nh√©!";
            else msg = "B√© ƒë√£ r·∫•t c·ªë g·∫Øng! H√£y c√πng luy·ªán t·∫≠p th√™m nh√©.";
            
            document.getElementById('result-message').innerText = msg;
        }
    </script>
</body>
</html>
