<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√© H·ªçc Ti·∫øng Vi·ªát L·ªõp 1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            background: #FFDEE9;
            background-image: linear-gradient(0deg, #FFDEE9 0%, #B5FFFC 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0;
            overflow: hidden;
            position: relative;
        }

        /* Hi·ªáu ·ª©ng b√≥ng bay n·ªÅn */
        .bubble {
            position: absolute;
            bottom: -50px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: float 10s infinite ease-in;
            z-index: 0;
        }

        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        .main-title {
            font-size: 1.6rem;
            font-weight: 800;
            color: #ff4757;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            text-shadow: 2px 2px 0px #ffffff;
            z-index: 10;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.95);
            border: 6px solid #fffa65;
            border-radius: 2rem;
            box-shadow: 0 15px 0px rgba(0,0,0,0.05);
            /* C·∫•u h√¨nh k√≠ch th∆∞·ªõc ch√≠nh x√°c theo y√™u c·∫ßu */
            width: 480px;
            height: 360px;
            padding: 1.25rem;
            text-align: center;
            position: relative;
            display: flex;
            flex-direction: column;
            overflow-x: auto;
            overflow-y: auto;
            z-index: 10;
        }

        /* T√πy ch·ªânh thanh cu·ªôn */
        .game-card::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        .game-card::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .game-card::-webkit-scrollbar-thumb {
            background: #ff9f43;
            border-radius: 10px;
        }

        .btn-answer {
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 3px solid #70a1ff;
            background: #ffffff;
            border-radius: 1rem;
            font-size: 0.95rem;
            color: #2f3542;
            min-height: 44px;
            padding: 0.5rem;
        }

        .btn-answer:hover:not(:disabled) {
            transform: translateY(-2px);
            background: #eccc68;
            border-color: #ffa502;
        }

        .correct {
            background-color: #2ed573 !important;
            color: white !important;
            border-color: #ffffff !important;
            box-shadow: 0 4px 0px #1e90ff;
        }

        .wrong {
            background-color: #ff4757 !important;
            color: white !important;
            border-color: #ffffff !important;
            box-shadow: 0 4px 0px #c0392b;
        }

        .progress-bar {
            height: 10px;
            background-color: #f1f2f6;
            border-radius: 10px;
            border: 1px solid #ced6e0;
            overflow: hidden;
            flex-shrink: 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff9f43, #ff6b6b);
            transition: width 0.3s ease;
        }

        .level-badge {
            background: #5352ed;
            color: white;
            padding: 0.15rem 0.6rem;
            border-radius: 2rem;
            font-weight: bold;
            font-size: 0.75rem;
            box-shadow: 0 2px 0px #3742fa;
        }

        #question-image {
            font-size: 3.5rem;
            filter: drop-shadow(2px 3px 4px rgba(0,0,0,0.1));
            margin-bottom: 0.25rem;
            flex-shrink: 0;
        }

        #quiz-screen {
            min-height: 100%;
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body>

    <script>
        // T·∫°o b√≥ng bay n·ªÅn
        for (let i = 0; i < 12; i++) {
            const b = document.createElement('div');
            b.className = 'bubble';
            const size = Math.random() * 50 + 20 + 'px';
            b.style.width = size;
            b.style.height = size;
            b.style.left = Math.random() * 100 + 'vw';
            b.style.animationDuration = Math.random() * 5 + 6 + 's';
            b.style.animationDelay = Math.random() * 5 + 's';
            document.body.appendChild(b);
        }
    </script>

    <h1 class="main-title">üåü TI·∫æNG VI·ªÜT L·ªöP 1 üåü</h1>

    <div id="game-container" class="game-card">
        <!-- M√†n h√¨nh b·∫Øt ƒë·∫ßu -->
        <div id="start-screen" class="my-auto">
            <div class="mb-3">
                <div class="text-6xl animate-bounce">üéí</div>
            </div>
            <h2 class="text-xl font-bold text-blue-500 mb-1">S·∫µn s√†ng ch∆∞a b√©?</h2>
            <p class="text-gray-600 mb-5 text-xs">V∆∞·ª£t qua 5 v√≤ng ƒë·ªÉ nh·∫≠n huy ch∆∞∆°ng nh√©!</p>
            <button onclick="startGame()" class="bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold py-2.5 px-8 rounded-full text-lg shadow-[0_4px_0px_#d35400] transition-all active:translate-y-1 active:shadow-none">
                CH∆†I NGAY
            </button>
        </div>

        <!-- M√†n h√¨nh ch∆°i game -->
        <div id="quiz-screen" class="hidden">
            <div class="mb-3 sticky top-0 bg-white/90 backdrop-blur-sm pb-1 pt-0.5 z-20">
                <div class="flex justify-between items-center mb-1">
                    <span class="level-badge" id="level-display">V√≤ng 1</span>
                    <span class="font-bold text-xs text-pink-500">‚≠ê ƒêi·ªÉm: <span id="score-display">0</span></span>
                </div>
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div class="flex-grow flex flex-col justify-center">
                <div id="question-image" class="animate-pulse"></div>
                <h2 id="question-text" class="text-base font-bold text-gray-800 px-2 mb-3"></h2>
                <div id="answers-grid" class="grid grid-cols-2 gap-2 px-1 mb-2"></div>
            </div>

            <div class="mt-auto pt-2 border-t border-dashed border-gray-100">
                <button onclick="endGame()" class="text-[10px] font-bold text-gray-300 hover:text-red-400 uppercase tracking-widest">D·ª´ng cu·ªôc ch∆°i</button>
            </div>
        </div>

        <!-- M√†n h√¨nh k·∫øt qu·∫£ -->
        <div id="result-screen" class="hidden my-auto">
            <div class="text-5xl mb-2">üèÜ</div>
            <h2 class="text-xl font-bold text-gray-800 mb-1">K·∫øt Qu·∫£ C·ªßa B√©</h2>
            <div class="text-4xl font-black text-orange-500 mb-2" id="final-score">0</div>
            <p id="result-message" class="text-sm font-bold text-blue-500 mb-5"></p>
            <button onclick="location.reload()" class="bg-blue-500 text-white font-bold py-2 px-8 rounded-full shadow-[0_3px_0px_#2980b9] text-base active:translate-y-1 active:shadow-none">
                CH∆†I L·∫†I
            </button>
        </div>
    </div>

    <script>
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playTone(freq, type, duration) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        const rawQuestions = [
            [
                { q: "Qu·∫£ g√¨ ƒë√¢y nh·ªâ?", img: "üçä", options: ["T√°o", "Cam", "L√™", "M·∫≠n"], correct: "Cam" },
                { q: "ƒêi·ªÅn ch·ªØ: 'C_ c√°'?", img: "üêü", options: ["u", "a", "o", "√¥"], correct: "a" },
                { q: "Con g√¨ ƒë√¢y?", img: "üê£", options: ["V·ªãt", "G√†", "Chim", "C√°"], correct: "G√†" },
                { q: "T·ª´ n√†o b·∫Øt ƒë·∫ßu b·∫±ng 'B'?", img: "‚öΩ", options: ["C√°", "B√≥ng", "D∆∞a", "G√†"], correct: "B√≥ng" },
                { q: "T·ª´ n√†o c√≥ v·∫ßn 'a'?", img: "üè†", options: ["Nh√†", "H·ªçc", "Ng·ªß", "ƒêi"], correct: "Nh√†" },
                { q: "B√© t√¨m ch·ªØ 'o'?", img: "‚≠ï", options: ["a", "e", "o", "u"], correct: "o" },
                { q: "Qu·∫£ g√¨ ch√≠n v√†ng?", img: "üçå", options: ["Kh·∫ø", "·ªîi", "Chu·ªëi", "Cam"], correct: "Chu·ªëi" },
                { q: "Con g√¨ k√™u 'Meo meo'?", img: "üê±", options: ["Ch√≥", "M√®o", "L·ª£n", "G√†"], correct: "M√®o" },
                { q: "Ch·ªØ ƒë·∫ßu c·ªßa 'Xe'?", img: "üö≤", options: ["X", "S", "C", "K"], correct: "X" },
                { q: "B√© t√¨m ch·ªØ 'ƒÉ'?", img: "üåô", options: ["a", "√¢", "ƒÉ", "o"], correct: "ƒÉ" }
            ],
            [
                { q: "T·ª´ n√†o c√≥ v·∫ßn 'an'?", img: "üß∫", options: ["B√†n", "B√∫t", "C·∫∑p", "S√°ch"], correct: "B√†n" },
                { q: "ƒêi·ªÅn ch·ªØ: 'H_ h·ªçc'?", img: "‚úçÔ∏è", options: ["i", "√™", "∆°", "√¥"], correct: "√™" },
                { q: "T·ª´ 'C√°' th√™m d·∫•u huy·ªÅn?", img: "üêü", options: ["C√†", "C·∫£", "C√°", "C·∫°"], correct: "C√†" },
                { q: "ƒê√¢y l√† v·∫≠t d·ª•ng g√¨?", img: "ü•õ", options: ["B√°t", "Ca", "ƒê≈©a", "Th√¨a"], correct: "Ca" },
                { q: "Qu·∫£ t√°o l√† 'Qu_ t√°o'?", img: "üçé", options: ["a", "·∫£", "√°", "√£"], correct: "·∫£" },
                { q: "Con g√¨ c√≥ v·∫ßn 'oi'?", img: "üêò", options: ["Voi", "G√†", "V·ªãt", "Ch√≥"], correct: "Voi" },
                { q: "T·ª´ n√†o c√≥ ch·ªØ 'd'?", img: "üçà", options: ["D∆∞a", "G√†", "C√°", "L√™"], correct: "D∆∞a" },
                { q: "ƒêi·ªÅn: '_·ªè c·ªè'?", img: "üå±", options: ["B", "C", "G", "H"], correct: "C" },
                { q: "T·ª´ 'M·∫π' c√≥ thanh g√¨?", img: "üë©", options: ["Huy·ªÅn", "S·∫Øc", "N·∫∑ng", "H·ªèi"], correct: "N·∫∑ng" },
                { q: "Gh√©p 'b' + '∆°' + huy·ªÅn?", img: "üßà", options: ["B∆°", "B·ªù", "B·ªü", "B·ªõ"], correct: "B·ªù" }
            ],
            [
                { q: "V·∫ßn '∆∞∆°n' c√≥ trong t·ª´?", img: "üåª", options: ["V∆∞·ªùn", "Bi·ªÉn", "N√∫i", "S√¥ng"], correct: "V∆∞·ªùn" },
                { q: "ƒêi·ªÅn: 'C_ chim'?", img: "ü¶Ö", options: ["on", "an", "en", "in"], correct: "on" },
                { q: "Qu·∫£ g√¨ s·∫ßn s√πi?", img: "üçà", options: ["Cam", "B∆∞·ªüi", "Chanh", "Qu√Ωt"], correct: "B∆∞·ªüi" },
                { q: "T·ª´ n√†o vi·∫øt ƒë√∫ng?", img: "üìê", options: ["Th∆∞·ªõc k·∫ª", "Th∆∞·ªõt k·∫ª", "Th·ª©c k·∫ª", "Th∆∞·ªõ k·∫Ω"], correct: "Th∆∞·ªõc k·∫ª" },
                { q: "B√© ch·ªçn v·∫ßn 'i√™'?", img: "ü™Å", options: ["Di·ªÅu", "ƒê√†o", "D·ª´a", "D·∫ø"], correct: "Di·ªÅu" },
                { q: "Con g√¨ c√≥ v·∫ßn 'u√¥'?", img: "üê¢", options: ["R√πa", "Cua", "C√°", "T√¥m"], correct: "Cua" },
                { q: "V·∫ßn 'ai' n·∫±m ·ªü ƒë√¢u?", img: "üëÇ", options: ["Tai", "Tay", "T√≥c", "M·∫Øt"], correct: "Tai" },
                { q: "ƒêi·ªÅn: 'M_ h·ªçc'?", img: "üè´", options: ["√¥", "∆°", "√™", "a"], correct: "∆°" },
                { q: "Ch·ªçn: 'C√° _'?", img: "ü¶ê", options: ["t√¥m", "cua", "ng·ª±a", "voi"], correct: "ng·ª±a" },
                { q: "V·∫ßn 'u√¥i' c√≥ ·ªü qu·∫£?", img: "üçå", options: ["Chu·ªëi", "B∆∞·ªüi", "Chanh", "M·∫≠n"], correct: "Chu·ªëi" }
            ],
            [
                { q: "C√¢u n√†o b√© th·∫•y ƒë√∫ng?", img: "üìñ", options: ["B√© ƒëi h·ªçc", "B√© h·ªçc ƒëi", "ƒêi b√© h·ªçc", "H·ªçc ƒëi b√©"], correct: "B√© ƒëi h·ªçc" },
                { q: "M·∫π r·∫•t _ b√©?", img: "‚ù§Ô∏è", options: ["y√™u", "gh√©t", "ƒëi", "ng·ªß"], correct: "y√™u" },
                { q: "ƒêang l√†m g√¨ th·∫ø?", img: "üèÉ", options: ["Ch·∫°y", "B√†n", "Gh·∫ø", "C·ª≠a"], correct: "Ch·∫°y" },
                { q: "B√© h·ªçc ·ªü ƒë√¢u?", img: "üè´", options: ["Nh√†", "Ch·ª£", "Tr∆∞·ªùng", "Tr·∫°m"], correct: "Tr∆∞·ªùng" },
                { q: "ƒêi·ªÅn: 'B√© v·∫Ω h_'?", img: "üåª", options: ["oa", "oe", "ua", "ia"], correct: "oa" },
                { q: "C√¢u n√†o ƒë√∫ng nghƒ©a?", img: "üçé", options: ["B√© ƒÉn t√°o", "T√°o ƒÉn b√©", "B√© t√°o ƒÉn", "ƒÇn b√© t√°o"], correct: "B√© ƒÉn t√°o" },
                { q: "ƒê·ªì v·∫≠t ƒë·ªÉ vi·∫øt b√†i?", img: "‚úèÔ∏è", options: ["B√∫t", "ƒêi", "H√°t", "Vui"], correct: "B√∫t" },
                { q: "ƒêi·ªÅn: 'B·ªë _ b√°o'?", img: "üóûÔ∏è", options: ["ƒë·ªçc", "ƒÉn", "ng·ªß", "ch∆°i"], correct: "ƒë·ªçc" },
                { q: "V·∫ßn 'ng' c√≥ ·ªü t·ª´?", img: "üëÇ", options: ["nghe", "nh√¨n", "n√≥i", "c∆∞·ªùi"], correct: "nghe" },
                { q: "B·∫ßu tr·ªùi th·∫ø n√†o?", img: "‚òÄÔ∏è", options: ["Tr·ªùi n·∫Øng", "N·∫Øng tr·ªùi", "Tr·ªùi ƒÉn", "ƒÇn tr·ªùi"], correct: "Tr·ªùi n·∫Øng" }
            ],
            [
                { q: "T·ª´ n√†o sai ch√≠nh t·∫£?", img: "‚ùå", options: ["Con ng√©", "Con ngh√©", "Con nghe", "Con c√°"], correct: "Con ng√©" },
                { q: "V·∫ßn: 'Kh_ kh√©'?", img: "‚≠ê", options: ["u√™", "o√™", "ia", "∆∞a"], correct: "u√™" },
                { q: "Tr·∫£ l·ªùi: 'B√© ƒëi ƒë√¢u?'", img: "‚ùì", options: ["B√© ƒëi h·ªçc.", "B√© l√† h·ªçc.", "B√© ƒÉn c∆°m.", "B√© ng·ªß."], correct: "B√© ƒëi h·ªçc." },
                { q: "V·∫ßn 'uy√™n' c√≥ ·ªü?", img: "üõ∂", options: ["Thuy·ªÅn", "Thi√™n", "Thu·∫≠n", "Thanh"], correct: "Thuy·ªÅn" },
                { q: "C√≥ ba, m·∫π, b√© l√†?", img: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶", options: ["Gia ƒë√¨nh", "B·∫°n b√®", "L·ªõp h·ªçc", "Ch·ª£"], correct: "Gia ƒë√¨nh" },
                { q: "ƒêi·ªÅn: 'Tr_ xanh'?", img: "üéã", options: ["e", "√™", "i", "o"], correct: "e" },
                { q: "C√¢u n√†o b√© l·ªÖ ph√©p?", img: "üôè", options: ["Con ch√†o m·∫π", "M·∫π ch√†o con", "Ch√†o m·∫π", "ƒêi ƒë√¢y"], correct: "Con ch√†o m·∫π" },
                { q: "ƒêi·ªÅn: 'Q_ h∆∞∆°ng'?", img: "üåæ", options: ["u√™", "u∆°", "ia", "∆∞a"], correct: "u√™" },
                { q: "V·∫ßn 'oanh' c√≥ ·ªü?", img: "üê¶", options: ["Chim oanh", "Chim s·∫ª", "Chim s√°o", "Chim s√¢u"], correct: "Chim oanh" },
                { q: "B√© th·∫•y tr√≤ ch∆°i n√†y _?", img: "üòä", options: ["vui", "bu·ªìn", "ƒë√≥i", "m·ªát"], correct: "vui" }
            ]
        ];

        let gameQuestions = [];
        let currentLevel = 0, currentQuestionIndex = 0, score = 0, canAnswer = true;

        function shuffle(arr) { return arr.sort(() => Math.random() - 0.5); }

        function prepareQuestions() {
            gameQuestions = rawQuestions.map(lvl => shuffle([...lvl]).map(q => {
                const options = shuffle([...q.options]);
                return { ...q, options, correct: options.indexOf(q.correct) };
            }));
        }

        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            score = 0; currentLevel = 0; currentQuestionIndex = 0;
            prepareQuestions(); updateScore(); loadQuestion();
        }

        function loadQuestion() {
            canAnswer = true;
            const q = gameQuestions[currentLevel][currentQuestionIndex];
            document.getElementById('level-display').innerText = `V√≤ng ${currentLevel + 1}`;
            document.getElementById('progress-fill').style.width = `${(currentQuestionIndex / 10) * 100}%`;
            document.getElementById('question-text').innerText = q.q;
            document.getElementById('question-image').innerText = q.img;
            const grid = document.getElementById('answers-grid');
            grid.innerHTML = '';
            q.options.forEach((opt, i) => {
                const b = document.createElement('button');
                b.className = 'btn-answer font-bold shadow-[0_3px_0px_#747d8c] active:translate-y-1 active:shadow-none';
                b.innerText = opt;
                b.onclick = () => check(i, b);
                grid.appendChild(b);
            });
            document.getElementById('game-container').scrollTop = 0;
        }

        function check(idx, b) {
            if (!canAnswer) return;
            canAnswer = false;
            const q = gameQuestions[currentLevel][currentQuestionIndex];
            if (idx === q.correct) {
                score++; b.classList.add('correct'); playTone(523.25, 'sine', 0.2);
            } else {
                score = Math.max(0, score - 1); b.classList.add('wrong');
                document.querySelectorAll('.btn-answer')[q.correct].classList.add('correct');
                playTone(220, 'triangle', 0.3);
            }
            updateScore();
            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex >= 10) {
                    currentLevel++; currentQuestionIndex = 0;
                    if (currentLevel >= 5) { endGame(); return; }
                }
                loadQuestion();
            }, 1000);
        }

        function updateScore() { document.getElementById('score-display').innerText = score; }

        function endGame() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
            document.getElementById('result-message').innerText = score >= 40 ? "B√© gi·ªèi qu√°! ü•á" : "C·ªë l√™n b√© nh√©! üìö";
        }
    </script>
</body>
</html>
