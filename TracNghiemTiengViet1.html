<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√© H·ªçc Ti·∫øng Vi·ªát L·ªõp 1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            background: #FFDEE9;
            background-image: linear-gradient(0deg, #FFDEE9 0%, #B5FFFC 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0;
            overflow: hidden;
            position: relative;
        }

        /* Hi·ªáu ·ª©ng b√≥ng bay n·ªÅn */
        .bubble {
            position: absolute;
            bottom: -50px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: float 10s infinite ease-in;
            z-index: 0;
        }

        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        .main-title {
            font-size: 1.8rem;
            font-weight: 800;
            color: #ff4757;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            text-shadow: 2px 2px 0px #ffffff;
            z-index: 10;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.95);
            border: 6px solid #fffa65;
            border-radius: 2rem;
            box-shadow: 0 20px 0px rgba(0,0,0,0.05);
            width: 480px;
            height: 380px; /* TƒÉng nh·∫π ƒë·ªÉ ch·ª©a th√™m deco */
            padding: 1rem;
            text-align: center;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            overflow: hidden;
            z-index: 10;
        }

        .btn-answer {
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 3px solid #70a1ff;
            background: #ffffff;
            border-radius: 1rem;
            font-size: 1rem;
            color: #2f3542;
        }

        .btn-answer:hover:not(:disabled) {
            transform: translateY(-3px);
            background: #eccc68;
            border-color: #ffa502;
        }

        .correct {
            background-color: #2ed573 !important;
            color: white !important;
            border-color: #ffffff !important;
            box-shadow: 0 4px 0px #1e90ff;
        }

        .wrong {
            background-color: #ff4757 !important;
            color: white !important;
            border-color: #ffffff !important;
            box-shadow: 0 4px 0px #c0392b;
        }

        .progress-bar {
            height: 12px;
            background-color: #f1f2f6;
            border-radius: 10px;
            border: 2px solid #ced6e0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff9f43, #ff6b6b);
            transition: width 0.3s ease;
        }

        .level-badge {
            background: #5352ed;
            color: white;
            padding: 0.2rem 0.8rem;
            border-radius: 2rem;
            font-weight: bold;
            font-size: 0.8rem;
            box-shadow: 0 3px 0px #3742fa;
        }

        #question-image {
            font-size: 4rem;
            filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.1));
            margin-bottom: 0.2rem;
        }

        .deco-icon {
            position: absolute;
            font-size: 2rem;
            opacity: 0.5;
        }
    </style>
</head>
<body>

    <!-- T·∫°o b√≥ng bay trang tr√≠ -->
    <script>
        for (let i = 0; i < 15; i++) {
            const b = document.createElement('div');
            b.className = 'bubble';
            const size = Math.random() * 60 + 20 + 'px';
            b.style.width = size;
            b.style.height = size;
            b.style.left = Math.random() * 100 + 'vw';
            b.style.animationDuration = Math.random() * 5 + 5 + 's';
            b.style.animationDelay = Math.random() * 5 + 's';
            document.body.appendChild(b);
        }
    </script>

    <h1 class="main-title">üåü TR·∫ÆC NGHI·ªÜM TI·∫æNG VI·ªÜT 1 üåü</h1>

    <div id="game-container" class="game-card">
        <!-- Trang tr√≠ g√≥c -->
        <div class="deco-icon" style="top: 10px; left: 10px;">üé®</div>
        <div class="deco-icon" style="top: 10px; right: 10px;">üöÄ</div>

        <!-- M√†n h√¨nh b·∫Øt ƒë·∫ßu -->
        <div id="start-screen">
            <div class="mb-4">
                <div class="text-6xl animate-bounce">üéí</div>
            </div>
            <h2 class="text-2xl font-bold text-blue-500 mb-2">S·∫µn s√†ng ch∆∞a b√©?</h2>
            <p class="text-gray-600 mb-6 text-sm">V∆∞·ª£t qua 5 v√≤ng ƒë·ªÉ nh·∫≠n huy ch∆∞∆°ng nh√©!</p>
            <button onclick="startGame()" class="bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-orange-500 hover:to-yellow-400 text-white font-bold py-3 px-10 rounded-full text-xl shadow-[0_5px_0px_#d35400] transition-all active:translate-y-1 active:shadow-none">
                CH∆†I NGAY
            </button>
        </div>

        <!-- M√†n h√¨nh ch∆°i game -->
        <div id="quiz-screen" class="hidden h-full flex flex-col justify-between">
            <div>
                <div class="flex justify-between items-center mb-2">
                    <span class="level-badge" id="level-display">V√≤ng 1</span>
                    <span class="font-bold text-sm text-pink-500">‚≠ê ƒêi·ªÉm: <span id="score-display">0</span></span>
                </div>
                <div class="progress-bar mb-2">
                    <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div id="question-image" class="animate-pulse">
                <!-- Emoji icon here -->
            </div>

            <h2 id="question-text" class="text-lg font-bold text-gray-800 px-2"></h2>

            <div id="answers-grid" class="grid grid-cols-2 gap-3 px-4">
                <!-- Answer buttons -->
            </div>

            <div class="mt-2">
                <button onclick="endGame()" class="text-xs font-bold text-gray-400 hover:text-red-500 uppercase tracking-widest">D·ª´ng cu·ªôc ch∆°i</button>
            </div>
        </div>

        <!-- M√†n h√¨nh k·∫øt qu·∫£ -->
        <div id="result-screen" class="hidden">
            <div class="text-6xl mb-2">üèÜ</div>
            <h2 class="text-2xl font-bold text-gray-800 mb-1">K·∫øt Qu·∫£ C·ªßa B√©</h2>
            <div class="text-5xl font-black text-orange-500 mb-2" id="final-score">0</div>
            <p id="result-message" class="text-md font-bold text-blue-500 mb-6"></p>
            <button onclick="location.reload()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-10 rounded-full shadow-[0_4px_0px_#2980b9] text-lg active:translate-y-1 active:shadow-none">
                CH∆†I L·∫†I N√ÄO
            </button>
        </div>
    </div>

    <script>
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playTone(freq, type, duration) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        function playCorrectSound() {
            playTone(523.25, 'sine', 0.2);
            setTimeout(() => playTone(659.25, 'sine', 0.3), 100);
        }

        function playWrongSound() {
            playTone(220, 'triangle', 0.3);
            setTimeout(() => playTone(196, 'triangle', 0.3), 150);
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        const rawQuestions = [
            [
                { q: "Qu·∫£ g√¨ ƒë√¢y nh·ªâ?", img: "üçä", options: ["T√°o", "Cam", "L√™", "M·∫≠n"], correct: "Cam" },
                { q: "ƒêi·ªÅn ch·ªØ: 'C_ c√°'?", img: "üêü", options: ["u", "a", "o", "√¥"], correct: "a" },
                { q: "Con g√¨ ƒë√°ng y√™u th·∫ø n√†y?", img: "üê£", options: ["V·ªãt", "G√†", "Chim", "C√°"], correct: "G√†" },
                { q: "T·ª´ n√†o b·∫Øt ƒë·∫ßu b·∫±ng 'B'?", img: "‚öΩ", options: ["C√°", "B√≥ng", "D∆∞a", "G√†"], correct: "B√≥ng" },
                { q: "T·ª´ n√†o c√≥ v·∫ßn 'a'?", img: "üè†", options: ["Nh√†", "H·ªçc", "Ng·ªß", "ƒêi"], correct: "Nh√†" },
                { q: "B√© t√¨m ch·ªØ 'o'?", img: "‚≠ï", options: ["a", "e", "o", "u"], correct: "o" },
                { q: "Qu·∫£ g√¨ ch√≠n v√†ng?", img: "üçå", options: ["Kh·∫ø", "·ªîi", "Chu·ªëi", "Cam"], correct: "Chu·ªëi" },
                { q: "Con g√¨ k√™u 'Meo meo'?", img: "üê±", options: ["Ch√≥", "M√®o", "L·ª£n", "G√†"], correct: "M√®o" },
                { q: "Ch·ªØ ƒë·∫ßu c·ªßa 'Xe'?", img: "üö≤", options: ["X", "S", "C", "K"], correct: "X" },
                { q: "B√© t√¨m ch·ªØ 'ƒÉ'?", img: "üåô", options: ["a", "√¢", "ƒÉ", "o"], correct: "ƒÉ" }
            ],
            [
                { q: "T·ª´ n√†o c√≥ v·∫ßn 'an'?", img: "üß∫", options: ["B√†n", "B√∫t", "C·∫∑p", "S√°ch"], correct: "B√†n" },
                { q: "ƒêi·ªÅn ch·ªØ: 'H_ h·ªçc'?", img: "‚úçÔ∏è", options: ["i", "√™", "∆°", "√¥"], correct: "√™" },
                { q: "T·ª´ 'C√°' th√™m d·∫•u huy·ªÅn?", img: "üêü", options: ["C√†", "C·∫£", "C√°", "C·∫°"], correct: "C√†" },
                { q: "ƒê√¢y l√† v·∫≠t d·ª•ng g√¨?", img: "ü•õ", options: ["B√°t", "Ca", "ƒê≈©a", "Th√¨a"], correct: "Ca" },
                { q: "Qu·∫£ t√°o l√† 'Qu_ t√°o'?", img: "üçé", options: ["a", "·∫£", "√°", "√£"], correct: "·∫£" },
                { q: "Con g√¨ c√≥ v·∫ßn 'oi'?", img: "üêò", options: ["Voi", "G√†", "V·ªãt", "Ch√≥"], correct: "Voi" },
                { q: "T·ª´ n√†o c√≥ ch·ªØ 'd'?", img: "üçà", options: ["D∆∞a", "G√†", "C√°", "L√™"], correct: "D∆∞a" },
                { q: "ƒêi·ªÅn: '_·ªè c·ªè'?", img: "üå±", options: ["B", "C", "G", "H"], correct: "C" },
                { q: "T·ª´ 'M·∫π' c√≥ thanh g√¨?", img: "üë©", options: ["Huy·ªÅn", "S·∫Øc", "N·∫∑ng", "H·ªèi"], correct: "N·∫∑ng" },
                { q: "Gh√©p 'b' + '∆°' + huy·ªÅn?", img: "üßà", options: ["B∆°", "B·ªù", "B·ªü", "B·ªõ"], correct: "B·ªù" }
            ],
            [
                { q: "V·∫ßn '∆∞∆°n' c√≥ trong t·ª´?", img: "üåª", options: ["V∆∞·ªùn", "Bi·ªÉn", "N√∫i", "S√¥ng"], correct: "V∆∞·ªùn" },
                { q: "ƒêi·ªÅn: 'C_ chim'?", img: "ü¶Ö", options: ["on", "an", "en", "in"], correct: "on" },
                { q: "Qu·∫£ g√¨ s·∫ßn s√πi?", img: "üçà", options: ["Cam", "B∆∞·ªüi", "Chanh", "Qu√Ωt"], correct: "B∆∞·ªüi" },
                { q: "T·ª´ n√†o vi·∫øt ƒë√∫ng?", img: "üìê", options: ["Th∆∞·ªõc k·∫ª", "Th∆∞·ªõt k·∫ª", "Th·ª©c k·∫ª", "Th∆∞·ªõ k·∫Ω"], correct: "Th∆∞·ªõc k·∫ª" },
                { q: "B√© ch·ªçn v·∫ßn 'i√™'?", img: "ü™Å", options: ["Di·ªÅu", "ƒê√†o", "D·ª´a", "D·∫ø"], correct: "Di·ªÅu" },
                { q: "Con g√¨ c√≥ v·∫ßn 'u√¥'?", img: "üê¢", options: ["R√πa", "Cua", "C√°", "T√¥m"], correct: "Cua" },
                { q: "V·∫ßn 'ai' n·∫±m ·ªü ƒë√¢u?", img: "üëÇ", options: ["Tai", "Tay", "T√≥c", "M·∫Øt"], correct: "Tai" },
                { q: "ƒêi·ªÅn: 'M_ h·ªçc'?", img: "üè´", options: ["√¥", "∆°", "√™", "a"], correct: "∆°" },
                { q: "Ch·ªçn: 'C√° _'?", img: "ü¶ê", options: ["t√¥m", "cua", "ng·ª±a", "voi"], correct: "ng·ª±a" },
                { q: "V·∫ßn 'u√¥i' c√≥ ·ªü qu·∫£?", img: "üçå", options: ["Chu·ªëi", "B∆∞·ªüi", "Chanh", "M·∫≠n"], correct: "Chu·ªëi" }
            ],
            [
                { q: "C√¢u n√†o b√© th·∫•y ƒë√∫ng?", img: "üìñ", options: ["B√© ƒëi h·ªçc", "B√© h·ªçc ƒëi", "ƒêi b√© h·ªçc", "H·ªçc ƒëi b√©"], correct: "B√© ƒëi h·ªçc" },
                { q: "M·∫π r·∫•t _ b√©?", img: "‚ù§Ô∏è", options: ["y√™u", "gh√©t", "ƒëi", "ng·ªß"], correct: "y√™u" },
                { q: "ƒêang l√†m g√¨ th·∫ø kia?", img: "üèÉ", options: ["Ch·∫°y", "B√†n", "Gh·∫ø", "C·ª≠a"], correct: "Ch·∫°y" },
                { q: "B√© h·ªçc ·ªü ƒë√¢u?", img: "üè´", options: ["Nh√†", "Ch·ª£", "Tr∆∞·ªùng", "Tr·∫°m"], correct: "Tr∆∞·ªùng" },
                { q: "ƒêi·ªÅn: 'B√© v·∫Ω h_'?", img: "üåª", options: ["oa", "oe", "ua", "ia"], correct: "oa" },
                { q: "C√¢u n√†o ƒë√∫ng nghƒ©a?", img: "üçé", options: ["B√© ƒÉn t√°o", "T√°o ƒÉn b√©", "B√© t√°o ƒÉn", "ƒÇn b√© t√°o"], correct: "B√© ƒÉn t√°o" },
                { q: "ƒê·ªì v·∫≠t ƒë·ªÉ vi·∫øt b√†i?", img: "‚úèÔ∏è", options: ["B√∫t", "ƒêi", "H√°t", "Vui"], correct: "B√∫t" },
                { q: "ƒêi·ªÅn: 'B·ªë _ b√°o'?", img: "üóûÔ∏è", options: ["ƒë·ªçc", "ƒÉn", "ng·ªß", "ch∆°i"], correct: "ƒë·ªçc" },
                { q: "V·∫ßn 'ng' c√≥ ·ªü t·ª´?", img: "üëÇ", options: ["nghe", "nh√¨n", "n√≥i", "c∆∞·ªùi"], correct: "nghe" },
                { q: "B·∫ßu tr·ªùi th·∫ø n√†o?", img: "‚òÄÔ∏è", options: ["Tr·ªùi n·∫Øng", "N·∫Øng tr·ªùi", "Tr·ªùi ƒÉn", "ƒÇn tr·ªùi"], correct: "Tr·ªùi n·∫Øng" }
            ],
            [
                { q: "T·ª´ n√†o sai ch√≠nh t·∫£?", img: "‚ùå", options: ["Con ng√©", "Con ngh√©", "Con nghe", "Con c√°"], correct: "Con ng√©" },
                { q: "V·∫ßn: 'Kh_ kh√©'?", img: "‚≠ê", options: ["u√™", "o√™", "ia", "∆∞a"], correct: "u√™" },
                { q: "Tr·∫£ l·ªùi: 'B√© ƒëi ƒë√¢u?'", img: "‚ùì", options: ["B√© ƒëi h·ªçc.", "B√© l√† h·ªçc.", "B√© ƒÉn c∆°m.", "B√© ng·ªß."], correct: "B√© ƒëi h·ªçc." },
                { q: "V·∫ßn 'uy√™n' c√≥ ·ªü?", img: "üõ∂", options: ["Thuy·ªÅn", "Thi√™n", "Thu·∫≠n", "Thanh"], correct: "Thuy·ªÅn" },
                { q: "C√≥ ba, c√≥ m·∫π, c√≥ b√© l√†?", img: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶", options: ["Gia ƒë√¨nh", "B·∫°n b√®", "L·ªõp h·ªçc", "Ch·ª£"], correct: "Gia ƒë√¨nh" },
                { q: "ƒêi·ªÅn: 'Tr_ xanh'?", img: "üéã", options: ["e", "√™", "i", "o"], correct: "e" },
                { q: "C√¢u n√†o b√© l·ªÖ ph√©p?", img: "üôè", options: ["Con ch√†o m·∫π", "M·∫π ch√†o con", "Ch√†o m·∫π", "ƒêi ƒë√¢y"], correct: "Con ch√†o m·∫π" },
                { q: "ƒêi·ªÅn: 'Q_ h∆∞∆°ng'?", img: "üåæ", options: ["u√™", "u∆°", "ia", "∆∞a"], correct: "u√™" },
                { q: "V·∫ßn 'oanh' c√≥ ·ªü?", img: "üê¶", options: ["Chim oanh", "Chim s·∫ª", "Chim s√°o", "Chim s√¢u"], correct: "Chim oanh" },
                { q: "B√© th·∫•y tr√≤ ch∆°i n√†y _?", img: "üòä", options: ["vui", "bu·ªìn", "ƒë√≥i", "m·ªát"], correct: "vui" }
            ]
        ];

        let gameQuestions = [];
        let currentLevel = 0;
        let currentQuestionIndex = 0;
        let score = 0;
        let canAnswer = true;

        function prepareQuestions() {
            gameQuestions = rawQuestions.map(levelQuestions => {
                const shuffledLevel = shuffleArray([...levelQuestions]);
                return shuffledLevel.map(q => {
                    const options = shuffleArray([...q.options]);
                    const correctIndex = options.indexOf(q.correct);
                    return { ...q, options, correct: correctIndex };
                });
            });
        }

        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            score = 0;
            currentLevel = 0;
            currentQuestionIndex = 0;
            prepareQuestions();
            updateScore();
            loadQuestion();
        }

        function loadQuestion() {
            canAnswer = true;
            const levelData = gameQuestions[currentLevel];
            const q = levelData[currentQuestionIndex];
            
            document.getElementById('level-display').innerText = `V√≤ng ${currentLevel + 1}`;
            document.getElementById('progress-fill').style.width = `${(currentQuestionIndex / 10) * 100}%`;
            document.getElementById('question-text').innerText = q.q;
            document.getElementById('question-image').innerText = q.img;
            
            const grid = document.getElementById('answers-grid');
            grid.innerHTML = '';
            
            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'btn-answer p-2 font-bold shadow-[0_4px_0px_#747d8c] active:translate-y-1 active:shadow-none';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(index, btn);
                grid.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, btn) {
            if (!canAnswer) return;
            canAnswer = false;

            const q = gameQuestions[currentLevel][currentQuestionIndex];
            const buttons = document.querySelectorAll('.btn-answer');

            if (selectedIndex === q.correct) {
                score += 1;
                btn.classList.add('correct');
                playCorrectSound();
            } else {
                score = Math.max(0, score - 1);
                btn.classList.add('wrong');
                buttons[q.correct].classList.add('correct');
                playWrongSound();
            }

            updateScore();
            setTimeout(nextQuestion, 1200);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex >= 10) {
                currentLevel++;
                currentQuestionIndex = 0;
                if (currentLevel >= 5) {
                    endGame();
                    return;
                }
            }
            loadQuestion();
        }

        function updateScore() {
            document.getElementById('score-display').innerText = score;
        }

        function endGame() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
            
            let msg = "";
            if (score >= 45) msg = "B√© l√† Tr·∫°ng Nguy√™n Ti·∫øng Vi·ªát! ü•á";
            else if (score >= 30) msg = "B√© l√†m t·ªët l·∫Øm, nh·∫≠n huy ch∆∞∆°ng B·∫°c n√®! ü•à";
            else msg = "C·ªë g·∫Øng luy·ªán t·∫≠p th√™m b√© nh√©! üìö";
            
            document.getElementById('result-message').innerText = msg;
        }
    </script>
</body>
</html>
