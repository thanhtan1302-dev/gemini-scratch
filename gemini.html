<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Gemini Debug</title>
</head>
<body>

<h3>Gemini status:</h3>
<pre id="result">Đang xử lý..</pre>

<script>
alert("JS ĐÃ CHẠY");

const params = new URLSearchParams(window.location.search);
const prompt = params.get("prompt");

document.getElementById("result").innerText =
  "Prompt nhận được: " + prompt;

if (prompt) {
  askGemini(prompt);
} else {
  document.getElementById("result").innerText =
    "❌ KHÔNG có prompt trong URL";
}

async function askGemini(p) {
  document.getElementById("result").innerText = "⏳ Đang gọi Gemini...";

  const res = await fetch(
    "https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key=AIzaSyDHvCQd19WNOBeXQZRpgBvlABMOtNcjQqI",
    {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        contents: [{ parts: [{ text: decodeURIComponent(p) }] }]
      })
    }
  );

  const data = await res.json();
  document.getElementById("result").innerText =
    JSON.stringify(data, null, 2);
}
</script>

</body>
</html>
