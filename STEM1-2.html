<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STEM: Giao Th√¥ng Th√¥ng Minh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #0f172a;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            width: 480px;
            height: 360px;
            background-color: #f8fafc;
            position: relative;
            overflow: hidden;
            border: 4px solid #3b82f6;
            border-radius: 16px;
            display: flex;
            flex-direction: column;
        }

        .exit-button {
            position: absolute;
            top: 8px;
            right: 8px;
            z-index: 50;
        }

        .content-section {
            flex: 1;
            padding: 12px;
            overflow-y: auto;
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ƒê√®n giao th√¥ng mini */
        .light-bulb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #111;
            margin: 4px auto;
            border: 1px solid #444;
        }
        .red.active { background: #ff0000; box-shadow: 0 0 10px #ff0000; }
        .yellow.active { background: #ffcc00; box-shadow: 0 0 10px #ffcc00; }
        .green.active { background: #00ff00; box-shadow: 0 0 10px #00ff00; }

        /* Custom Scrollbar */
        .content-section::-webkit-scrollbar { width: 4px; }
        .content-section::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }

        .page-indicator {
            background: #3b82f6;
            color: white;
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 999px;
        }
    </style>
</head>
<body>

    <div class="app-container">
        <!-- N√∫t Tho√°t -->
        <div class="exit-button">
            <button onclick="exitApp()" class="bg-red-500 hover:bg-red-600 text-white font-bold py-1 px-2 rounded-lg text-[9px] shadow-sm uppercase">
                Tho√°t
            </button>
        </div>

        <!-- Header -->
        <header class="bg-blue-600 text-white p-2 flex justify-between items-center shadow-md">
            <span class="text-[10px] font-bold uppercase tracking-tight">STEM: Giao Th√¥ng Th√¥ng Minh</span>
            <span id="page-number" class="page-indicator">Trang 1/10</span>
        </header>

        <!-- N·ªòI DUNG 10 TRANG -->
        <main class="flex-1 overflow-hidden relative">
            
            <!-- TRANG 1: GI·ªöI THI·ªÜU -->
            <section id="page-1" class="content-section active">
                <div class="text-center mt-4">
                    <div class="text-4xl mb-2">üö¶</div>
                    <h2 class="text-lg font-bold text-blue-800 uppercase">Ch√†o m·ª´ng em!</h2>
                    <p class="text-xs text-gray-600 px-6 mt-2 leading-relaxed">
                        H√¥m nay ch√∫ng ta s·∫Ω c√πng kh√°m ph√° th·∫ø gi·ªõi giao th√¥ng ƒë·ªÉ bi·∫øt c√°ch ƒëi ƒë∆∞·ªùng an to√†n v√† th√¥ng minh nh√©!
                    </p>
                    <div class="mt-6 bg-blue-50 p-3 rounded-xl border border-blue-200 mx-4">
                        <p class="text-[10px] font-bold text-blue-700">M·ª§C TI√äU B√ÄI H·ªåC:</p>
                        <ul class="text-[9px] text-left mt-1 list-disc list-inside text-gray-700">
                            <li>Nh·∫≠n bi·∫øt c√°c lo·∫°i ƒë√®n t√≠n hi·ªáu</li>
                            <li>Ph√¢n bi·ªát 3 nh√≥m bi·ªÉn b√°o c∆° b·∫£n</li>
                            <li>Bi·∫øt c√°ch sang ƒë∆∞·ªùng an to√†n</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- TRANG 2: ƒê√àN XE -->
            <section id="page-2" class="content-section">
                <h2 class="text-xs font-bold text-blue-800 mb-3 border-b pb-1">1. ƒê√àN T√çN HI·ªÜU PH∆Ø∆†NG TI·ªÜN</h2>
                <div class="flex items-center gap-4 bg-white p-3 rounded-xl shadow-sm">
                    <div class="bg-gray-900 p-2 rounded-xl w-12">
                        <div class="light-bulb red active" id="l2-r"></div>
                        <div class="light-bulb yellow" id="l2-y"></div>
                        <div class="light-bulb green" id="l2-g"></div>
                    </div>
                    <div class="flex-1 space-y-2">
                        <div class="p-2 bg-red-50 rounded border-l-4 border-red-500 text-[10px]">
                            <b class="text-red-600">ƒê√àN ƒê·ªé:</b> D·ª´ng l·∫°i tr∆∞·ªõc v·∫°ch.
                        </div>
                        <div class="p-2 bg-yellow-50 rounded border-l-4 border-yellow-500 text-[10px]">
                            <b class="text-yellow-600">ƒê√àN V√ÄNG:</b> ƒêi ch·∫≠m, chu·∫©n b·ªã d·ª´ng.
                        </div>
                        <div class="p-2 bg-green-50 rounded border-l-4 border-green-500 text-[10px]">
                            <b class="text-green-600">ƒê√àN XANH:</b> ƒê∆∞·ª£c ph√©p di chuy·ªÉn.
                        </div>
                    </div>
                </div>
            </section>

            <!-- TRANG 3: ƒê√àN ƒêI B·ªò -->
            <section id="page-3" class="content-section">
                <h2 class="text-xs font-bold text-blue-800 mb-3 border-b pb-1">2. ƒê√àN D√ÄNH CHO NG∆Ø·ªúI ƒêI B·ªò</h2>
                <div class="grid grid-cols-2 gap-3">
                    <div class="bg-white p-3 rounded-xl text-center border">
                        <div class="bg-black w-10 h-16 mx-auto rounded flex flex-col justify-around p-1">
                            <span class="text-red-500 text-xl font-bold">üßç</span>
                            <span class="text-gray-800 text-xl">üö∂</span>
                        </div>
                        <p class="text-[9px] font-bold mt-2 text-red-600">ƒê·ª®NG ƒê·ª¢I</p>
                        <p class="text-[8px] text-gray-500">Khi ƒë√®n h√¨nh ng∆∞·ªùi m√†u ƒë·ªè</p>
                    </div>
                    <div class="bg-white p-3 rounded-xl text-center border">
                        <div class="bg-black w-10 h-16 mx-auto rounded flex flex-col justify-around p-1">
                            <span class="text-gray-800 text-xl">üßç</span>
                            <span class="text-green-500 text-xl font-bold animate-pulse">üö∂</span>
                        </div>
                        <p class="text-[9px] font-bold mt-2 text-green-600">ƒê∆Ø·ª¢C ƒêI</p>
                        <p class="text-[8px] text-gray-500">Khi ƒë√®n h√¨nh ng∆∞·ªùi m√†u xanh</p>
                    </div>
                </div>
            </section>

            <!-- TRANG 4: BI·ªÇN B√ÅO C·∫§M -->
            <section id="page-4" class="content-section">
                <h2 class="text-xs font-bold text-red-600 mb-3 border-b pb-1">3. NH√ìM BI·ªÇN B√ÅO C·∫§M</h2>
                <p class="text-[9px] mb-3">ƒê·∫∑c ƒëi·ªÉm: H√¨nh tr√≤n, vi·ªÅn ƒë·ªè, n·ªÅn tr·∫Øng.</p>
                <div class="grid grid-cols-2 gap-2">
                    <div class="bg-white p-2 rounded border flex items-center gap-2">
                        <div class="w-8 h-8 rounded-full border-4 border-red-500 flex items-center justify-center font-bold text-red-500">‚úñ</div>
                        <span class="text-[8px] font-bold">ƒê∆Ø·ªúNG C·∫§M</span>
                    </div>
                    <div class="bg-white p-2 rounded border flex items-center gap-2">
                        <div class="w-8 h-8 bg-red-500 rounded-full flex items-center justify-center"><div class="w-5 h-1 bg-white"></div></div>
                        <span class="text-[8px] font-bold">C·∫§M NG∆Ø·ª¢C CHI·ªÄU</span>
                    </div>
                    <div class="bg-white p-2 rounded border flex items-center gap-2">
                        <div class="w-8 h-8 rounded-full border-4 border-red-500 flex items-center justify-center relative">üö≤<div class="absolute w-full h-0.5 bg-red-500 rotate-45"></div></div>
                        <span class="text-[8px] font-bold">C·∫§M XE ƒê·∫†P</span>
                    </div>
                    <div class="bg-white p-2 rounded border flex items-center gap-2">
                        <div class="w-8 h-8 rounded-full border-4 border-red-500 flex items-center justify-center relative">üö∂<div class="absolute w-full h-0.5 bg-red-500 rotate-45"></div></div>
                        <span class="text-[8px] font-bold">C·∫§M NG∆Ø·ªúI ƒêI B·ªò</span>
                    </div>
                </div>
            </section>

            <!-- TRANG 5: BI·ªÇN NGUY HI·ªÇM -->
            <section id="page-5" class="content-section">
                <h2 class="text-xs font-bold text-yellow-600 mb-3 border-b pb-1">4. NH√ìM BI·ªÇN NGUY HI·ªÇM</h2>
                <p class="text-[9px] mb-3">ƒê·∫∑c ƒëi·ªÉm: H√¨nh tam gi√°c, vi·ªÅn ƒë·ªè, n·ªÅn v√†ng.</p>
                <div class="grid grid-cols-2 gap-2">
                    <div class="bg-white p-2 rounded border flex items-center gap-2">
                        <div class="text-xl">‚ö†Ô∏è</div>
                        <span class="text-[8px] font-bold">C·∫¢NH B√ÅO CHUNG</span>
                    </div>
                    <div class="bg-white p-2 rounded border flex items-center gap-2">
                        <div class="text-xl">üßí</div>
                        <span class="text-[8px] font-bold">TR·∫∫ EM ƒêI NGANG</span>
                    </div>
                    <div class="bg-white p-2 rounded border flex items-center gap-2">
                        <div class="text-xl">üö≤</div>
                        <span class="text-[8px] font-bold">XE ƒê·∫†P C·∫ÆT NGANG</span>
                    </div>
                    <div class="bg-white p-2 rounded border flex items-center gap-2">
                        <div class="text-xl">üöß</div>
                        <span class="text-[8px] font-bold">C√îNG TR∆Ø·ªúNG</span>
                    </div>
                </div>
            </section>

            <!-- TRANG 6: BI·ªÇN CH·ªà D·∫™N -->
            <section id="page-6" class="content-section">
                <h2 class="text-xs font-bold text-blue-600 mb-3 border-b pb-1">5. NH√ìM BI·ªÇN CH·ªà D·∫™N</h2>
                <p class="text-[9px] mb-3">ƒê·∫∑c ƒëi·ªÉm: H√¨nh vu√¥ng ho·∫∑c ch·ªØ nh·∫≠t, n·ªÅn xanh.</p>
                <div class="grid grid-cols-2 gap-2">
                    <div class="bg-blue-600 text-white p-2 rounded flex items-center gap-2">
                        <div class="text-xl">üö∂</div>
                        <span class="text-[8px] font-bold">ƒê∆Ø·ªúNG NG∆Ø·ªúI ƒêI B·ªò</span>
                    </div>
                    <div class="bg-blue-600 text-white p-2 rounded flex items-center gap-2">
                        <div class="text-xl">üè•</div>
                        <span class="text-[8px] font-bold">B·ªÜNH VI·ªÜN</span>
                    </div>
                    <div class="bg-blue-600 text-white p-2 rounded flex items-center gap-2">
                        <div class="text-xl">üÖøÔ∏è</div>
                        <span class="text-[8px] font-bold">B√ÉI ƒê·ªñ XE</span>
                    </div>
                    <div class="bg-blue-600 text-white p-2 rounded flex items-center gap-2">
                        <div class="text-xl">üìû</div>
                        <span class="text-[8px] font-bold">ƒêI·ªÜN THO·∫†I C√îNG C·ªòNG</span>
                    </div>
                </div>
            </section>

            <!-- TRANG 7: QUY TR√åNH SANG ƒê∆Ø·ªúNG -->
            <section id="page-7" class="content-section">
                <h2 class="text-xs font-bold text-blue-800 mb-3 border-b pb-1">6. QUY T·∫ÆC SANG ƒê∆Ø·ªúNG AN TO√ÄN</h2>
                <div class="space-y-2">
                    <div class="flex items-center gap-2 bg-white p-2 rounded border">
                        <span class="bg-blue-600 text-white w-4 h-4 rounded-full text-[8px] flex items-center justify-center">1</span>
                        <span class="text-[9px]">D·ª´ng l·∫°i tr√™n v·ªâa h√® tr∆∞·ªõc v·∫°ch k·∫ª ƒë∆∞·ªùng.</span>
                    </div>
                    <div class="flex items-center gap-2 bg-white p-2 rounded border">
                        <span class="bg-blue-600 text-white w-4 h-4 rounded-full text-[8px] flex items-center justify-center">2</span>
                        <span class="text-[9px]">Quan s√°t tr√°i, ph·∫£i, sau ƒë√≥ quan s√°t tr√°i l·∫ßn n·ªØa.</span>
                    </div>
                    <div class="flex items-center gap-2 bg-white p-2 rounded border">
                        <span class="bg-blue-600 text-white w-4 h-4 rounded-full text-[8px] flex items-center justify-center">3</span>
                        <span class="text-[9px]">Ch·ªù ƒë√®n ƒëi b·ªô chuy·ªÉn sang m√†u xanh.</span>
                    </div>
                    <div class="flex items-center gap-2 bg-white p-2 rounded border">
                        <span class="bg-blue-600 text-white w-4 h-4 rounded-full text-[8px] flex items-center justify-center">4</span>
                        <span class="text-[9px]">ƒêi nhanh nh∆∞ng kh√¥ng ch·∫°y, lu√¥n ch√∫ √Ω xe c·ªô.</span>
                    </div>
                </div>
            </section>

            <!-- TRANG 8: M√î PH·ªéNG -->
            <section id="page-8" class="content-section">
                <h2 class="text-xs font-bold text-blue-800 mb-2">7. TH·ª∞C H√ÄNH M√î PH·ªéNG</h2>
                <div class="relative h-28 bg-gray-200 rounded-lg border-2 border-gray-400 overflow-hidden mb-2">
                    <div class="absolute inset-x-0 top-1/2 -translate-y-1/2 h-16 bg-gray-700 flex items-center justify-center">
                        <div class="w-16 h-full flex justify-between px-1">
                            <div class="w-3 h-full bg-white"></div>
                            <div class="w-3 h-full bg-white"></div>
                            <div class="w-3 h-full bg-white"></div>
                        </div>
                    </div>
                    <div id="ped" class="absolute bottom-2 left-4 text-2xl transition-all duration-1000">üë¶</div>
                    <div id="car" class="absolute top-8 right-2 text-2xl transition-all duration-700">üöó</div>
                    <div class="absolute top-1 right-10 bg-black p-1 rounded flex flex-col gap-0.5">
                        <div id="sim-red" class="w-2 h-2 rounded-full bg-red-900"></div>
                        <div id="sim-green" class="w-2 h-2 rounded-full bg-green-900"></div>
                    </div>
                </div>
                <div class="flex justify-center gap-4">
                    <button onclick="sim('red')" class="px-3 py-1 bg-red-600 text-white text-[9px] rounded font-bold">ƒê√àN ƒê·ªé</button>
                    <button onclick="sim('green')" class="px-3 py-1 bg-green-600 text-white text-[9px] rounded font-bold">ƒê√àN XANH</button>
                </div>
            </section>

            <!-- TRANG 9: TH·ª¨ TH√ÅCH -->
            <section id="page-9" class="content-section">
                <h2 class="text-xs font-bold text-blue-800 mb-3 uppercase">8. Th·ª≠ th√°ch th√¥ng th√°i</h2>
                <div id="quiz-area" class="bg-white p-3 rounded-xl border border-blue-100 text-center">
                    <p id="q-text" class="text-[10px] font-bold mb-4">Lo·∫°i bi·ªÉn b√°o n√†o sau ƒë√¢y c√≥ h√¨nh Tam gi√°c, vi·ªÅn ƒê·ªè, n·ªÅn V√†ng?</p>
                    <div class="grid gap-2">
                        <button onclick="ans(false)" class="p-2 border rounded-lg text-[9px] hover:bg-blue-50">Bi·ªÉn b√°o C·∫•m</button>
                        <button onclick="ans(true)" class="p-2 border rounded-lg text-[9px] hover:bg-blue-50">Bi·ªÉn b√°o Nguy hi·ªÉm</button>
                        <button onclick="ans(false)" class="p-2 border rounded-lg text-[9px] hover:bg-blue-50">Bi·ªÉn b√°o Ch·ªâ d·∫´n</button>
                    </div>
                </div>
            </section>

            <!-- TRANG 10: T·ªîNG K·∫æT -->
            <section id="page-10" class="content-section">
                <div class="text-center mt-6">
                    <div class="text-5xl mb-4">üèÜ</div>
                    <h2 class="text-lg font-bold text-blue-800">CH√öC M·ª™NG EM!</h2>
                    <p class="text-xs text-gray-600 px-6 mt-2">
                        Em ƒë√£ ho√†n th√†nh xu·∫•t s·∫Øc 10 trang b√†i h·ªçc v·ªÅ Giao Th√¥ng Th√¥ng Minh.
                    </p>
                    <div class="mt-8">
                        <button onclick="goToPage(1)" class="bg-blue-600 text-white px-6 py-2 rounded-full text-xs font-bold shadow-lg">H·ªåC L·∫†I T·ª™ ƒê·∫¶U</button>
                    </div>
                </div>
            </section>

        </main>

        <!-- Footer: ƒêi·ªÅu h∆∞·ªõng -->
        <footer class="p-2 bg-gray-100 border-t flex justify-between items-center">
            <button id="prev-btn" onclick="changePage(-1)" class="px-4 py-1.5 bg-gray-400 text-white rounded-lg text-[10px] font-bold disabled:opacity-30" disabled>TR∆Ø·ªöC</button>
            <div class="flex gap-1" id="page-dots">
                <!-- Dots generated by JS -->
            </div>
            <button id="next-btn" onclick="changePage(1)" class="px-4 py-1.5 bg-blue-600 text-white rounded-lg text-[10px] font-bold">TI·∫æP</button>
        </footer>
    </div>

    <script>
        let currentPage = 1;
        const totalPages = 10;

        function exitApp() {
            window.parent.postMessage('close_iframe', '*');
            document.body.innerHTML = "<div class='text-white text-center'><p>T·∫°m bi·ªát em!</p></div>";
        }

        function changePage(delta) {
            const newPage = currentPage + delta;
            if (newPage >= 1 && newPage <= totalPages) {
                goToPage(newPage);
            }
        }

        function goToPage(page) {
            // Hide all
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            // Show target
            const target = document.getElementById(`page-${page}`);
            target.classList.add('active');
            
            currentPage = page;
            updateUI();

            // Special logic for page 2 (light cycle)
            if (page === 2) startAutoLight(); else stopAutoLight();
        }

        function updateUI() {
            document.getElementById('page-number').textContent = `Trang ${currentPage}/10`;
            document.getElementById('prev-btn').disabled = currentPage === 1;
            document.getElementById('next-btn').disabled = currentPage === totalPages;
            
            // Update dots
            const dots = document.getElementById('page-dots');
            dots.innerHTML = '';
            for(let i=1; i<=totalPages; i++) {
                const dot = document.createElement('div');
                dot.className = `w-1.5 h-1.5 rounded-full ${i === currentPage ? 'bg-blue-600' : 'bg-gray-300'}`;
                dots.appendChild(dot);
            }
        }

        // Trang 2: ƒê√®n xe ch·∫°y t·ª± ƒë·ªông
        let lightInterval;
        function startAutoLight() {
            let step = 0;
            const colors = ['r', 'y', 'g'];
            clearInterval(lightInterval);
            lightInterval = setInterval(() => {
                document.querySelectorAll('#page-2 .light-bulb').forEach(b => b.classList.remove('active'));
                document.getElementById(`l2-${colors[step]}`).classList.add('active');
                step = (step + 1) % 3;
            }, 1500);
        }
        function stopAutoLight() { clearInterval(lightInterval); }

        // Trang 8: M√¥ ph·ªèng
        function sim(color) {
            const r = document.getElementById('sim-red');
            const g = document.getElementById('sim-green');
            const ped = document.getElementById('ped');
            const car = document.getElementById('car');
            const status = document.getElementById('sim-status');

            if(color === 'green') {
                r.className = "w-2 h-2 rounded-full bg-red-900";
                g.className = "w-2 h-2 rounded-full bg-green-500 shadow-[0_0_5px_#0f0]";
                ped.style.left = "45%";
                car.style.right = "80%";
            } else {
                r.className = "w-2 h-2 rounded-full bg-red-500 shadow-[0_0_5px_#f00]";
                g.className = "w-2 h-2 rounded-full bg-green-900";
                ped.style.left = "1rem";
                car.style.right = "0.5rem";
            }
        }

        // Trang 9: Tr·∫Øc nghi·ªám
        function ans(correct) {
            const area = document.getElementById('quiz-area');
            if(correct) {
                area.innerHTML = "<div class='text-green-600 font-bold'>üéâ CH√çNH X√ÅC!<br><span class='text-[8px] text-gray-500'>Em r·∫•t am hi·ªÉu v·ªÅ bi·ªÉn b√°o giao th√¥ng.</span></div><button onclick='changePage(1)' class='mt-4 bg-blue-600 text-white px-4 py-1 rounded text-[10px]'>TI·∫æP T·ª§C</button>";
            } else {
                alert("Ch∆∞a ƒë√∫ng r·ªìi, em h√£y ch·ªçn l·∫°i nh√©!");
            }
        }

        // Kh·ªüi t·∫°o
        updateUI();
    </script>
</body>
</html>
